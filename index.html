<!DOCTYPE html> 
<html>
  <head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'> 
    <title>editApp</title>
    <style>
    </style>
  </head>
  <body style='margin:0px; padding:0px;'>
   <script>
      var div = document.createElement('div');
      div.setAttribute('id','div');
      // div.style.setAttribute('width','1080');
      // div.style.setAttribute('height','2176');
      // div.style.setAttribute('border','solid black 1px');
      document.body.appendChild(div);
      
      var div1 = document.createElement('div');
      div1.setAttribute('id','div1'); 
      document.getElementById('div').appendChild(div1);
      
      var div2 = document.createElement('div');
      div2.setAttribute('id','div2'); 
      document.getElementById('div').appendChild(div2);
      
      var canvas = document.createElement('canvas');
      canbas.setAttribute('id','canvas');
      canvas.setAttribute('width','1080');
      canvas.setAttribute('height','1024'); 
      canvas.setAttribute('border','solid black 1px');
      document.getElementById('div').appendChild(canvas);
    </script>
	  
	<script>
		document.getElementById('div').style = 'width:1080px;height:2176px';
		document.getElementById('div1').style = 'width:1080px;height:512px';
		document.getElementById('div2').style = 'width:1080px;height:512px';
	</script>
	  
	<script> 
		
		var touchx=0; var touchy=0; var touch=0; 
		var timer;
	
function handleEnd(evt) { 
       evt.preventDefault();
       var ele = document.getElementById('canvas');
       var ctx = ele.getContext('2d');
       var touches = evt.changedTouches;
       var  x = touches[0].pageX; touchx = x;
       var  y = touches[0].pageY; touchy = y;
       var  tend = 3;             touch  = tend;  // touchend
      }
      canvas.addEventListener("touchend", handleEnd, false);	
	
</script> 
	
<script> 
	
window.addEventListener('beforeunload', function (e) { 
e.preventDefault(); 
e.returnValue = ''; 
}); 
	function check() { 
		var tx = touchx; var ty = touchy;  var th = touch; 
		if(th) {    
			if(tx>0 && tx<1080 && ty>0 && ty<1080) { 
				clearInterval(timer); touch=0; 
				readPad(28, 0, 0); 
				timer = setInterval(check,0100);
			} 
		} 
	} 
	timer = setInterval(check,0100); 
	
</script>
	  
    <script> 
	    
      // drawPad(28, 0, 0); // 2160-512 
      function drawPad(x, y, t) {  
        alert('1');  
        var px=0; var py=0; 
        var pw=0; var ph=0;
        var cl=16; var rw=16; 
        var kc=0; var kr=0; 
        var kl=2; var kt=2; 
        var kw=60; var kh=60; 
        
        var imgBuf = new ArrayBuffer(kw*4*kh);
        var imgView = new Uint8Array(imgBuf);
  
        var cnv = document.getElementById('canvas'); 
        var ctx = cnv.getContext('2d'); 
        var imgData = ctx.createImageData(kw, kh); 
	
        ctx.fillStyle = 'rgba(192,192,192,1.0)'; // gray
        ctx.fillRect(x, y, 1024, 1024);
        
        for (let i=0; i<(kw*4*kh); i+=4) { 
            imgView[i+0] = 0xFF; // R
            imgView[i+1] = 0xFF; // G
            imgView[i+2] = 0xFF; // B
            imgView[i+3] = 0xFF; // A
        }
        
        function draw(kc, kr, kw, kh, kl, kt) { 
	    var kx=x+px+(kw+kl*2)*kc; 
	    var ky=y+py+(kh+kt*2)*kr; 
	    for (let i=0; i<(kw*4*kh); i++) { 
		imgData.data[i] = imgView[i]; 
	    } 
	    ctx.putImageData(imgData, kx+kl, ky+kt); 
        } 
  
        for (let j=0; j<rw; j++) { 
          for (let i=0; i<cl; i++) { 
             /* if (j==0 && i==0) {cl=10; px=0;} 
             if (j==1 && i==0) {if(t==0||t==1){cl=9; px=((kw+kl*2)/2);}if(t==2||t==3){cl=10; px=0;}} 
             if (j==2 && i==0) {cl=9; px=0; pw=((kw+kl*2)/2);} 
             if (j==2 && i==1) {cl=9; px=((kw+kl*2)/2); pw=0;} 
             if (j==2 && i==8) {cl=9; px=((kw+kl*2)/2); pw=((kw+kl*2)/2);}
             if (j==3 && i==0) {cl=5; px=0; pw=((kw+kl*2)/2);} 
             if (j==3 && i==1) {cl=5; px=((kw+kl*2)/2); pw=0;} 
             if (j==3 && i==2) {cl=5; px=((kw+kl*2)/2); pw=((kw+kl*2)*4);} 
             if (j==3 && i==3) {cl=5; px=((kw+kl*2)/2)+((kw+kl*2)*4); pw=0;} 
             if (j==3 && i==4) {cl=5; px=((kw+kl*2)/2)+((kw+kl*2)*4); pw=((kw+kl*2)/2);} */
             kc=i; kr=j; 
             draw(kc, kr, kw, kh, kl, kt); 
          } 
        }  
      } 
	    drawPad(28, 0, 0); // 2160-512 
	    
	</script>
	  
	<script> 
		
	function readPad(x, y, t) { 
		document.getElementById('div1').innerHTML += 'touched ';  
		/*
		
		var tx=touchx; var ty=touchy; 
                var px=0; var py=0; 
                var pw=0; var ph=0;
                var cl=16; var rw=16; 
                var kc=0; var kr=0; 
                var kl=2; var kt=2; 
                var kw=60; var kh=60; 
		var b=false; 
		
		var imgBuf = new ArrayBuffer(kw*4*kh);
                var imgView = new Uint8Array(imgBuf); 
	
                var cnv = document.getElementById('canvas'); 
                var ctx = cnv.getContext('2d'); 
                var imgData = ctx.createImageData(kw, kh); 
		
		for (let i=0; i<(kw*4*kh); i+=4) { 
                    imgView[i+0] = 0x00; // R
                    imgView[i+1] = 0x00; // G
                    imgView[i+2] = 0xFF; // B
                    imgView[i+3] = 0xFF; // A
                }
		
		function read(kc, kr, kw, kh, kl, kt) { 
			var kx=x+px+(kw+kl*2)*kc; 
			var ky=y+py+(kh+kt*2)*kr; 
			if(tx>kx && tx<(kx+kl+kw+pw+kl) && ty>ky && ty<(ky+kt+kh+ph+kt)) { 
				b=true; 
			} else {b=false;} 
                } 
		
		function show(kc, kr, kw, kh, kl, kt) {
			var kx=x+px+(kw+kl*2)*kc; 
	                var ky=y+py+(kh+kt*2)*kr; 
	                for (let i=0; i<kw*4*kh; i++) { 
				imgData.data[i] = imgView[i]; 
			} 
	                ctx.putImageData(imgData, kx+kl, ky+kt); 
		}
		
		for (let j=0; j<rw; j++) { 
                    for (let i=0; i<cl; i++) { 
                       kc=i; kr=j; 
                       read(kc, kr, kw, kh, kl, kt); 
                       if (b) {break;} 
                    } 
                    if (b) {break;} 
                } 
		if (b) {show(kc, kr, kw, kh, kl, kt);} */
	}
	    
    </script>
    <script>
    </script>
    <script>
    </script>
  </body>
</html>
